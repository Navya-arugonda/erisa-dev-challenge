{# Inline create/update form used inside the list page panel #}
<div class="card">
  <h3 class="mb-2">
    {% if form.instance.pk %}Edit Claim {{ form.instance.claim_id }}{% else %}Create Claim{% endif %}
  </h3>

  {% if form.errors %}
    <div class="alert alert-danger">Please correct the errors below.</div>
  {% endif %}

  <form method="post"
        hx-post="{% if form.instance.pk %}{% url 'claim-update' form.instance.pk %}{% else %}{% url 'claim-create' %}{% endif %}"
        hx-target="#claim-detail-target"
        hx-swap="innerHTML">
    {% csrf_token %}

    <div class="grid">
      {{ form.non_field_errors }}
      <label>Claim ID {{ form.claim_id }}</label>
      <label>Patient {{ form.patient_name }}</label>
      <label>Payer {{ form.payer }}</label>
      <label>Billed {{ form.amount }}</label>
      <label>Paid {{ form.paid_amount }}</label>
      <label>Status {{ form.status }}</label>
      <label>Service date {{ form.service_date }}</label>
    </div>

    <div class="mt-3" style="display:flex;gap:.5rem;">
      <button class="btn btn-primary" type="submit">
        {% if form.instance.pk %}Save{% else %}Create{% endif %}
      </button>

      {# Close just clears the panelâ€”no page reload. #}
      <button class="btn" type="button"
              hx-get="{% url 'claim-form-close' %}"
              hx-target="#claim-detail-target"
              hx-swap="innerHTML">
        Cancel
      </button>
    </div>
  </form>
</div>
