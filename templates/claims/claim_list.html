{% extends "base.html" %}
{% block title %}Claims{% endblock %}

{% block content %}
<div class="container">

  {# Filter form â€“ HTMX serializes q & status automatically #}
  <form id="filters"
        class="row mb-3"
        hx-get="."
        hx-target="#claim-table"
        hx-push-url="true"
        hx-trigger="keyup changed delay:300ms from:input, change from:select"
        style="gap:.5rem; align-items:center;">

    <input class="input"
           type="search"
           name="q"
           value="{{ q|default:'' }}"
           placeholder="Search by ID / patient / payer" />

    <select class="select" name="status">
      <option value="" {% if not status_sel %}selected{% endif %}>All statuses</option>
      <option value="Denied" {% if status_sel == "Denied" %}selected{% endif %}>Denied</option>
      <option value="Pending" {% if status_sel == "Pending" %}selected{% endif %}>Pending</option>
      <option value="Appealed" {% if status_sel == "Appealed" %}selected{% endif %}>Appealed</option>
      <option value="Paid" {% if status_sel == "Paid" %}selected{% endif %}>Paid</option>
      <option value="Under Review" {% if status_sel == "Under Review" %}selected{% endif %}>Under Review</option>
    </select>

    <a class="btn" href="{% url 'dashboard' %}">Dashboard</a>

    <button class="btn"
            type="button"
            hx-get="{% url 'claim-create' %}"
            hx-target="#claim-table"
            hx-swap="outerHTML">
      Add Claim
    </button>
  </form>

  {# The include below MUST render a wrapper with id="claim-table" #}
  {% include "includes/claim_table.html" %}
</div>
{% endblock %}
